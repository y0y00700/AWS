1장. 웹 서비스를 배포할 때 사용하는 S3,CloudFront
S3는 파일 저장서비스이지만 부가적인 기능중 하나가 '정적 웹 사이트 호스팅' 기능이다.
쉽게 표현하면 웹 서비스를 다른 사용자들도 쓸 수 있게 인터넷에 배포하는 것을 뜻한다.

CloudFront란?
한줄 : 컨텐츠(파일,동영상 등)를 빠르게 전송하게 해주는 서비스이다.
AWS CloudFront가 어떻게 컨텐츠를 빠르게 전송하게 해주는 지 작동 과정을 알아보자.

컨텐츠(파일,동영상)는 S3에 저장된다. 하지만 그 S3 저장소가 한국에 있다고 가정하면,
한국 사용자는 S3와 거리가 가까우므로 데이터를 빠르게 전송받을 수 있다.
하지만 미국에 있는 사용자가 S3로부터 데이터를 전송받으려면 거리가 멀어 시간이 오래 걸리게 된다.

이런 문제를 해결하기 위해 전세계 곳곳에 컨텐츠의 복사본을 저장해놓을 수 있는 임시 저장소를 구축한다.
그러면 미국에 있는 사용자가 컨텐츠를 전송받고 싶을 떄, 가장 가까운 임시 저장소에서 컨텐츠를 가져오면 훨씬 속도가 빨라진다.

이런 형태의 서비스를 보고 CDN(Content Delivery Network)이라고 부른다.
그래서 CloudFront를 CDN 서비스라고도 표현한다.

CloudFront 는 왜 사용?
S3만 사용해도 웹 서비스를 배포할 수 있다.

CloudFront가 왜 필요?
CloudFront는 컨텐츠를 전송 받는 성능을 향상시키기 위해 사용한다.
그리고 HTTPS를 적용하려면 CloudFront를 사용해야만 한다.
S3에는 HTTPS를 적용시키는 기능을 제공하지 않다.

이러한 장점들 덕분에 S3와 CloudFront를 같이 써서 웹 서비스를 배포한다

2장. S3, CloudFront를 활용한 아키텍처 구성
client > Amazon CloudFront > S3 

3장. (실습) S3 버킷 생성하기
Section 5 참조

4장. (실습) S3에 업로드하기/웹 호스팅 설정하기
버킷 상세> 업로드 >index.html 생성 > 드래그 하여 업로드

버킷> 속성 > 정적 웹 사이트 호스팅 클릭 > 활성화
인덱스 문서 > index.html  >변경사항 저장

여기에 CloudFront 를 적용 시킨다.(HTTPS 를 적용시키기 위해)

보충. React 프로젝트를 S3에 업로드하는 방법 (자료 링크 포함)

5장. (실습) CloudFront 생성하기
AWS 검색 > Cloudfront  > 배포 생성
원본 도메인 > 원본 도메인 선택(S3)
기본 캐시동작 >
뷰어 > 뷰어 프로토콜 정책 : Redirect HTTP to HTTPS

웹 애플리케이션 방화벽(WAF) :  보안 보호 비활성화

설정 >
가격 분류 : 북미,유럽,아시아,중동 및 아프리카에서 사용
기본값 루트 객체 - 선택 사항 : index.html

배포 생성

배포 도메인 이름 주소값 복사하여 접속해본다.

6장. CloudFront 도메인 연결 및 HTTPS 적용하기
AWS 검색 > Certificate Manager (인증서 발급)
※ CloudFront 에 HTTPS발급받으려면 region미국 버지니아 동부에서 발급

인증서 요청 > Section 5에 발급 과정 참조.
인증서를 Route 53에서 레코드 추가 해준다.

7장. 비용나가지 않게 종료하기
CloutFront > 비활성화 & 종료
S3 > 버킷내 파일 삭제 & 버킷 삭제

